<!--
<<<<<<< HEAD
<div class="row">
  <#% @products.each do |product| %>
  <div class="col-xs-6 col-md-3">
    <#%= link_to product_path(product) do %>
      <#% if product.image.present? %>
        <#%= image_tag(product.image.thumb.url, class: "thumbnail") %>
    <#% else %>
        <#%= image_tag("http://placehold.it/200x200&text=No Pic", class: "thumbnail") %>
    <#% end %>
  <#% end %>
    <#%= product.title %> $ <#%= product.price %>
    <#% if current_user && current_user.is_favorite_of?(product) %>
    <#%= link_to('取消收藏'.html_safe, favorite_product_path(product, type: "unfavorite"), method: :put) %>
    <#% else %>
    <#%= link_to('添加收藏'.html_safe, favorite_product_path(product, type: "favorite"), method: :put) %>
    <#% end %>
=======
-->
  <div class="container-fluid" style="background-color:#eee;">
    <div class="container">
      <div class="row">
        <div class="col-md-12">
          <div class="order">
            <div class="col-md-8">
              <a href="<%= if params[:where].nil? then "?order=hot" else "?where=" + params[:where] +"&order=hot" end %>"><span class="fa fa-long-arrow-down" aria-hidden="true">&nbsp;热门</span></a>
              <a href="<%= if params[:where].nil? then "?order=new" else "?where=" + params[:where] +"&order=new" end %>"><span class="fa fa-long-arrow-down" aria-hidden="true">&nbsp;新品</span></a>
              <a href="<%= if params[:where].nil? then "?order=sale" else "?where=" + params[:where] +"&order=sale" end %>"><span class="fa fa-long-arrow-down" aria-hidden="true">&nbsp;销量</span></a>
              <a href="<%= if params[:where].nil? then "?order=price" else "?where=" + params[:where] +"&order=price" end %>"><span class="fa fa-long-arrow-down" aria-hidden="true">&nbsp;价格</span></a>
              <a href="#"><span class="fa fa-long-arrow-down" aria-hidden="true">&nbsp;评价数</span></a>
            </div>
            <div class="text-right">
              <span>
                共<%= @products.count %>件商品
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>



<div class="container">
  <div class="product-list">
    <ul>
      <% @products.each do |product| %>
      <li>

        <div class="product-price">
          <a href="<%= product_path(product) %>">
            <img class="product-img" src="<%= img430(product,1) %>" alt=""></a>
          <p class="price">￥<%= product.promotional %></p>
          <p class="describe"><%= product.title %></p>
          <p class="evaluate">已有33条评价</p>
          <div class="cart">
            <a href="#" class="contain-icon icon-hook">
              <div class="favor">
                <svg class="heart-icon heart-icon-2" version="1.1" height="16px" viewBox="0 0 90.65 85.04">
                  <path class="heart-2" fill="none" stroke="#FFFFFF" stroke-width="8" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
                  M45.137,23.041c4.912-24.596,40.457-27.775,42.128-0.435c1.398,22.88-21.333,40.717-42.128,50.522 M45.137,23.041
                  C40.225-1.555,5.057-4.734,3.387,22.606c-1.398,22.88,20.955,40.717,41.75,50.522"></path>
                </svg>
            </div>

    &nbsp;收藏
        </a>
          </div>
          <div class="cart text-center">
            <%= render :partial => "products/add_to_cart", :locals => { :product => product } %>
          </div>
        </div>
      </li>
      <% end %>
      </ul>
    </div>

  </div>
  <div class="text-center">
    <%= will_paginate @products %>

  </div>

  <script type="text/javascript">
// Get a list of all svg elements
icons = document.querySelectorAll('.icon-hook');

// Cycle through list
for (var i = 0; i < icons.length; i++) {
  icons[i].addEventListener('click', function(event) {
    event.preventDefault();

    var icon = this;
    var currentClass = icon.getAttribute('class'); // The starting class

    console.log(icon);

    if (currentClass.indexOf('active-favor') > -1) {
      // Remove .active
      icon.setAttribute('class', currentClass.replace(' active-favor', ''));
    } else {
      // Add .active
      icon.setAttribute('class', currentClass + ' active-favor');
    }
  }, false);
}
</script>
